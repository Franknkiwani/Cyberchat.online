<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Instagram Style Posts Feed (Firebase)</title>
<style>
  body {
    background: #111;
    color: #eee;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    margin: 0;
    padding: 20px;
  }
  #posts-container {
    max-width: 600px;
    margin: 0 auto;
  }
  .post {
    background: rgba(255 255 255 / 0.05);
    border-radius: 12px;
    margin-bottom: 20px;
    padding: 15px;
    box-shadow: 0 0 10px #222 inset;
  }
  .post-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
  }
  .avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #fff;
  }
  .username {
    font-weight: 700;
    font-size: 1.1rem;
  }
  .post-title {
    font-weight: 600;
    font-size: 1.2rem;
    margin-bottom: 10px;
  }
  .post-image {
    width: 100%;
    border-radius: 10px;
    margin-bottom: 10px;
    object-fit: cover;
    max-height: 400px;
  }
  .description {
    font-size: 0.95rem;
    line-height: 1.3;
    margin-bottom: 10px;
  }
  .read-more {
    cursor: pointer;
    color: #0af;
    font-weight: 700;
    user-select: none;
  }
  .actions {
    display: flex;
    gap: 15px;
  }
  .action {
    cursor: pointer;
    display: flex;
    align-items: center;
  }
  .action svg {
    fill: #fff;
    transition: fill 0.2s ease;
  }
  .action:hover svg {
    fill: #0af;
  }
</style>
</head>
<body>

<div id="posts-container">
  <p>Loading posts...</p>
</div>

<!-- SVG Icons Hidden, use <use> later -->
<svg style="display:none;" xmlns="http://www.w3.org/2000/svg">
  <symbol id="icon-like" viewBox="0 0 24 24" width="22" height="22" fill="#fff">
    <path d="M2 21h4V9H2v12zM23 10c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 2 7.59 8.59C7.22 8.95 7 9.45 7 10v9c0 1.1.9 2 2 2h7c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1z"/>
  </symbol>
  <symbol id="icon-dislike" viewBox="0 0 24 24" width="22" height="22" fill="#fff">
    <path d="M22 3h-4v12h4V3zM1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 22l6.59-6.59c.36-.36.59-.86.59-1.41V5c0-1.1-.9-2-2-2H7c-.83 0-1.54.5-1.84 1.22L2.14 9.27c-.09.23-.14.47-.14.73v1z"/>
  </symbol>
  <symbol id="icon-share" viewBox="0 0 24 24" width="22" height="22" fill="#fff">
    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.02-4.11c.53.5 1.23.81 2.01.81 1.66 0 3-1.34 3-3s-1.34-3-3-3S16 4.34 16 6c0 .24.04.47.09.7L9.07 10.8C8.53 10.3 7.83 10 7.05 10 5.39 10 4.05 11.34 4.05 13s1.34 3 3 3c.78 0 1.48-.3 2.01-.8l7.13 4.18c-.05.21-.09.43-.09.66 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z"/>
  </symbol>
  <symbol id="icon-save" viewBox="0 0 24 24" width="22" height="22" fill="#fff">
    <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
  </symbol>
</svg>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDFHskUWiyHhZke3KT9kkOtFI_gPsKfiGo",
    authDomain: "itzhoyoo-f9f7e.firebaseapp.com",
    databaseURL: "https://itzhoyoo-f9f7e-default-rtdb.firebaseio.com",
    projectId: "itzhoyoo-f9f7e",
    storageBucket: "itzhoyoo-f9f7e.filestorage.app",
    messagingSenderId: "1094792075584",
    appId: "1:1094792075584:web:d49e9c3f899d3cd31082a5",
    measurementId: "G-LLT6F9WRKH"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const postsRef = ref(db, 'post');
  const container = document.getElementById("posts-container");

  function createPostHTML(post) {
    const { username, avatar, title, description, image } = post;

    let descHTML;
    if (description && description.length > 30) {
      const shortText = description.slice(0, 30);
      descHTML = `
        <div class="description">
          <span class="short-text">${shortText}...</span>
          <span class="full-text" style="display:none;">${description}</span>
          <span class="read-more">Read more</span>
        </div>`;
    } else {
      descHTML = `<div class="description">${description || ""}</div>`;
    }

    return `
      <div class="post">
        <div class="post-header">
          <img src="${avatar || 'https://i.imgur.com/6VBx3io.png'}" alt="${username || 'User'}'s avatar" class="avatar" />
          <div class="username">${username || 'Unknown'}</div>
        </div>
        <div class="post-title">${title || "No Title"}</div>
        ${image ? `<img src="${image}" alt="Post image" class="post-image" />` : ""}
        ${descHTML}
        <div class="actions">
          <span class="action" title="Like">
            <svg width="22" height="22" fill="#fff">
              <use xlink:href="#icon-like"></use>
            </svg>
          </span>
          <span class="action" title="Dislike">
            <svg width="22" height="22" fill="#fff">
              <use xlink:href="#icon-dislike"></use>
            </svg>
          </span>
          <span class="action" title="Share">
            <svg width="22" height="22" fill="#fff">
              <use xlink:href="#icon-share"></use>
            </svg>
          </span>
          <span class="action" title="Save">
            <svg width="22" height="22" fill="#fff">
              <use xlink:href="#icon-save"></use>
            </svg>
          </span>
        </div>
      </div>
    `;
  }

  onValue(postsRef, (snapshot) => {
    const postsData = snapshot.val();
    if (!postsData) {
      container.innerHTML = "<p>No posts found.</p>";
      return;
    }

    const postsArray = Object.values(postsData);
    container.innerHTML = postsArray.map(createPostHTML).join("");
  });

  container.addEventListener("click", (e) => {
    if (e.target.classList.contains("read-more")) {
      const descDiv = e.target.closest(".description");
      const shortText = descDiv.querySelector(".short-text");
      const fullText = descDiv.querySelector(".full-text");

      if (fullText.style.display === "none") {
        fullText.style.display = "inline";
        shortText.style.display = "none";
        e.target.textContent = "Show less";
      } else {
        fullText.style.display = "none";
        shortText.style.display = "inline";
        e.target.textContent = "Read more";
      }
    }
  });
</script>

</body>
</html>