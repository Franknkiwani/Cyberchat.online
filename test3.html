<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Frank's Post Feed</title>
<style>
  body {
    background: #121212;
    color: #eee;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    margin: 20px;
  }
  .post {
    background: rgba(255 255 255 / 0.05);
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 20px;
    max-width: 500px;
    box-shadow: 0 0 10px rgba(0 0 0 / 0.8);
  }
  .post-header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }
  .avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 10px;
  }
  .username {
    font-weight: 700;
    font-size: 1.1em;
  }
  .post-title {
    font-weight: 700;
    font-size: 1.3em;
    margin-bottom: 8px;
  }
  .post-image {
    width: 100%;
    border-radius: 12px;
    margin-bottom: 10px;
    object-fit: cover;
  }
  .description {
    font-size: 0.9em;
    line-height: 1.3;
    margin-bottom: 8px;
    white-space: pre-wrap;
  }
  .read-more {
    color: #5eaaff;
    cursor: pointer;
    user-select: none;
    font-weight: 600;
    font-size: 0.9em;
  }
  .actions {
    display: flex;
    gap: 18px;
  }
  .action svg {
    cursor: pointer;
    transition: fill 0.3s;
  }
  .action svg:hover {
    fill: #5eaaff;
  }
</style>
</head>
<body>

<!-- Hidden SVG sprites -->
<svg style="display:none;">
  <symbol id="icon-like" viewBox="0 0 24 24" fill="currentColor">
    <path d="M2 21h4V9H2v12zM23 10c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 2 7.59 8.59C7.22 8.95 7 9.45 7 10v9c0 1.1.9 2 2 2h7c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1z"/>
  </symbol>
  <symbol id="icon-dislike" viewBox="0 0 24 24" fill="currentColor">
    <path d="M22 3h-4v12h4V3zM1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 22l6.59-6.59c.36-.36.59-.86.59-1.41V5c0-1.1-.9-2-2-2H7c-.83 0-1.54.5-1.84 1.22L2.14 9.27c-.09.23-.14.47-.14.73v1z"/>
  </symbol>
  <symbol id="icon-share" viewBox="0 0 24 24" fill="currentColor">
    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.02-4.11c.53.5 1.23.81 2.01.81 1.66 0 3-1.34 3-3s-1.34-3-3-3S16 4.34 16 6c0 .24.04.47.09.7L9.07 10.8C8.53 10.3 7.83 10 7.05 10 5.39 10 4.05 11.34 4.05 13s1.34 3 3 3c.78 0 1.48-.3 2.01-.8l7.13 4.18c-.05.21-.09.43-.09.66 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z"/>
  </symbol>
  <symbol id="icon-save" viewBox="0 0 24 24" fill="currentColor">
    <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
  </symbol>
</svg>

<div id="posts-container"></div>

<script>
  // Dummy data for demo; replace with your actual data fetch from Firebase
  const posts = [
    {
      username: "frank",
      avatar: "https://i.imgur.com/6VBx3io.png",
      title: "Check this out!",
      description: "This is a sample post description that's definitely longer than thirty characters to trigger the read-more toggle. See how it works?",
      image: "https://i.imgur.com/8Km9tLL.jpg"
    },
    {
      username: "zoe",
      avatar: "https://i.imgur.com/abcd1234.png",
      title: "Short Description",
      description: "Short desc.",
      image: "https://i.imgur.com/xYz7890.jpg"
    }
  ];

  function createPostHTML(post) {
    const { username, avatar, title, description, image } = post;

    // Description logic: truncate >30 chars with read more
    let descHTML;
    if (description.length > 30) {
      const shortText = description.slice(0, 30);
      descHTML = `
        <div class="description">
          <span class="short-text">${shortText}...</span>
          <span class="full-text" style="display:none;">${description}</span>
          <span class="read-more">Read more</span>
        </div>`;
    } else {
      descHTML = `<div class="description">${description}</div>`;
    }

    return `
      <div class="post">
        <div class="post-header">
          <img src="${avatar}" alt="${username}'s avatar" class="avatar" />
          <div class="username">${username}</div>
        </div>
        <div class="post-title">${title}</div>
        <img src="${image}" alt="Post image" class="post-image" />
        ${descHTML}
        <div class="actions">
          <span class="action" title="Like">
            <svg width="22" height="22" fill="#fff">
              <use xlink:href="#icon-like"></use>
            </svg>
          </span>
          <span class="action" title="Dislike">
            <svg width="22" height="22" fill="#fff">
              <use xlink:href="#icon-dislike"></use>
            </svg>
          </span>
          <span class="action" title="Share">
            <svg width="22" height="22" fill="#fff">
              <use xlink:href="#icon-share"></use>
            </svg>
          </span>
          <span class="action" title="Save">
            <svg width="22" height="22" fill="#fff">
              <use xlink:href="#icon-save"></use>
            </svg>
          </span>
        </div>
      </div>
    `;
  }

  const container = document.getElementById("posts-container");
  container.innerHTML = posts.map(createPostHTML).join("");

  // Add read-more toggle logic
  container.addEventListener("click", (e) => {
    if (e.target.classList.contains("read-more")) {
      const descDiv = e.target.closest(".description");
      const shortText = descDiv.querySelector(".short-text");
      const fullText = descDiv.querySelector(".full-text");

      if (fullText.style.display === "none") {
        fullText.style.display = "inline";
        shortText.style.display = "none";
        e.target.textContent = "Show less";
      } else {
        fullText.style.display = "none";
        shortText.style.display = "inline";
        e.target.textContent = "Read more";
      }
    }
  });
</script>
</body>
</html>